# atlantis.yaml
version: 3
projects:
# If two or more projects have the same dir and workspace, they must also have
# a 'name' key to differentiate them.
- name: build-project
  dir: ./build-clusters
  workflow: build
- name: dev-project
  dir: ./workload-clusters
  workflow: dev

workflows:
  build:
    plan:
      steps:
      - init
          extra_args: ["-backend-config", "backend.tfvars"]
      - plan:
          extra_args: ["-var-file", "build.tfvars"]
  dev:
    plan:
      steps:
      - init
          # extra_args: ["-backend-config", "backend.tfvars"]
      - plan:
          extra_args: ["-var-file", "./env/dev.tfvars"]